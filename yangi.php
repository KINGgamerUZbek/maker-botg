<?php
ini_set("display_errors", 1);
define('API_KEY',"API_TOKEN"); 

$admin = "ADMIN_ID";
$kid1 = "@$ch1";
$botla = "@$ch1";
$bot = "$bot";
function bot($method,$datas=[]){
    $url = "https://api.telegram.org/bot".API_KEY."/".$method;
    $ch = curl_init();
    curl_setopt($ch,CURLOPT_URL,$url);
    curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);
    curl_setopt($ch,CURLOPT_POSTFIELDS,$datas);
    $res = curl_exec($ch);
    if(curl_error($ch)){
        var_dump(curl_error($ch));
    }else{
        return json_decode($res);
    }
}

function joinchat($fid){
    global $message_id,$firstname;
$ch1 = file_get_contents("ch1.txt");
    $ret = bot("getChatMember",[
        "chat_id"=>"@".$ch1."",
        "user_id"=>$fid,
        ]);
$stat = $ret->result->status;
$ch2 = file_get_contents("ch2.txt");
$rets = bot("getChatMember",[
        "chat_id"=>"@".$ch2."",
        "user_id"=>$fid,
        ]);
$stats = $rets->result->status;
$ch3 = file_get_contents("ch3.txt");
$retus = bot("getChatMember",[
        "chat_id"=>"@".$ch3."",
        "user_id"=>$fid,
        ]);
$status = $retus->result->status;
        if((($stat=="creator" or $stat=="administrator" or $stat=="member") and ($stats=="creator" or $stats=="administrator" or $stats=="member") and ($status=="creator" or $status=="administrator" or $status=="member"))){
     return true;
        }else{
    bot("sendMessage",[
        "chat_id"=>$fid,
        "text"=>"<b>Quyidagi kanallarimizga obuna bo ªling. Botni keyin to ªliq ishlatishingiz mumkin!</b>",
        "parse_mode"=>"html",
        "reply_to_message_id"=>$message_id,
"disable_web_page_preview"=>true,
"reply_markup"=>json_encode([
"inline_keyboard"=>[
[["text"=>"‚ûï A‚Äòzo bo‚Äòlish","url"=>"https://t.me/$ch1"],],
[["text"=>"‚ûï A‚Äòzo bo‚Äòlish","url"=>"https://t.me/$ch2"],],
[["text"=>"‚ûï A‚Äòzo bo‚Äòlish","url"=>"https://t.me/$ch3"],],
[["text"=>"‚úÖ Tasdiqlash","callback_data"=>"result"],],
]
]),
]);
}
}  


   $kanala = file_put_contents("kanal/chatid.kanal1","$text");
   $kanalr = file_put_contents("kanal/chatid.kanal2","$text");
   $kanals = file_put_contents("kanal/chatid.kanal3","$text");

$update = json_decode(file_get_contents('php://input'));
$message = $update->message;
$cid = $message->chat->id;
$tx = $message->text;
$from_id = $update->message->from->id;
$mid = $message->message_id;
$name = $message->from->first_name;
$fid = $message->from->id;
$callback = $update->callback_query;
$message = $update->message;
$mid = $message->message_id;
$data = $update->callback_query->data;
$type = $message->chat->type;
$text = $message->text;
$cid = $message->chat->id;
$uid= $message->from->id;
$gname = $message->chat->title;
$left = $message->left_chat_member;
$new = $message->new_chat_member;
$name = $message->from->first_name;
$repid = $message->reply_to_message->from->id;
$repname = $message->reply_to_message->from->first_name;
$newid = $message->new_chat_member->id;
$leftid = $message->left_chat_member->id;
$newname = $message->new_chat_member->first_name;
$leftname = $message->left_chat_member->first_name;
$username = $message->from->username;
$cmid = $update->callback_query->message->message_id;
$cusername = $message->chat->username;
$repmid = $message->reply_to_message->message_id; 
$ccid = $update->callback_query->message->chat->id;
$cuid = $update->callback_query->message->from->id;
$cqid = $update->callback_query->id;

$photo = $update->message->photo;
$gif = $update->message->animation;
$video = $update->message->video;
$music = $update->message->audio;
$voice = $update->message->voice;
$sticker = $update->message->sticker;
$document = $update->message->document;
$for = $message->forward_from;
$forc = $message->forward_from_chat;
$data = $callback->data;
$callid = $callback->id;
$adstep = file_get_contents("admin/admin.step");
$cname = $calback->message->from->first_name;
$ccid = $callback->message->chat->id;
$cmid = $callback->message->message_id;
$cfid = $callback->message->from->id;
$user = $message->from->username;
$botname = bot('getme',['bot'])->result->username; // @ belgisiz yozing
$inlinequery = $update->inline_query;
$inline_id = $inlinequery->id;
$inlineid = $inlinequery->from->id;
$inline_query = $inlinequery->query;
$adminuser = "ADMIN_USER";
$time = date('H:i');
$soat = date("H:i");
$sana = date('d/m/Y');
$user = file_get_contents("Unknown_Blogger.ids");
$guruh = file_get_contents("pul/guruh.db");
$blocklar = file_get_contents("block.dat");
mkdir("referal");
mkdir("stat");
mkdir("step");
mkdir("data");
mkdir("data/$fid");
mkdir("user");
mkdir("prouser");
mkdir("user/$fid");
mkdir("prouser/$fid");
mkdir("ban");
mkdir("reklama");

mkdir("minus");
if(!file_exists("referal/$fid.txt")){  
    file_put_contents("referal/$fid.txt","0");
}

if(file_get_contents("stat/stat.txt")){
} else{
file_put_contents("stat/stat.txt", "0");
}
$getss= file_get_contents("admin/blocks.txt");

if(mb_stripos($getss, $fid)!==false){
	bot('sendMessage',[
	'chat_id' => $cid,
	'text' => "Kechirasiz <b>$name</b> siz botimizdan bloklangansiz!",
	'parse_mode'=>'html',
	]); 
	return false;
	}$referalsum = file_get_contents("referal/$fid.txt");
$referalid = file_get_contents("referal/$fid.referal");
$referalcid = file_get_contents("referal/$ccid.referal");
$userstep = file_get_contents("step/$fid.txt");

$soni = file_get_contents("soni/$idi.soni");
if(!$soni) $soni = 0;

$stat = file_get_contents("stat/usid.txt");

$panel = json_encode([
    'resize_keyboard'=>true,
    'keyboard'=>[
    [['text'=>"üí∏ Pul berish"],['text'=>"üí∏ Pul ayirish"]],
    [['text'=>"üìä Statistika"],['text'=>"‚ÜóÔ∏è Xabar yuborish"]], 
    [['text'=>"‚ûï Kanal Qo'shish"],['text'=>"‚ûï Admin Qo'shish"]], 
    [['text'=>"üóë Kanal O'chirish"],['text'=>"üóë Admin O'chirish"]],
    [['text'=>"üìÑ Kanal Ro'yhati"],['text'=>"üìÑ Admin Ro'yhati"]],
    [['text'=>"üñá Reklama Berish"],['text'=>"üñá Reklama O'chirish"],],
    [['text'=>"‚ùå O'chirish"],['text'=>"‚úÖ Yoqish"]],
    [['text'=>"üîí Bloklash"],['text'=>"üîì Blokdan olish"]],
    [['text'=>"üîôOrtga qaytish"]],
    ]
    ]);

$main_menu = json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
          [['text'=>"üõ†Botlarni boshqarish"],],
          [['text'=>"üí∏ Pul ishlash"],['text'=>"üì±Kabinet"]],
          [['text'=>"‚ùì Yordam"],['text'=>"üìä Statistika"]],
          [['text'=>"üì® Bog‚Äòlanish"],['text'=>"üìã Ma'lumotlar"]],
]
]);

$botchalar = json_encode([
"inline_keyboard"=>[
[["text"=>"Bot Yaratish üôã‚Äç‚ôÇ","url"=>"https://t.me/$bot"],],
]
]);



$pul_menu = json_encode([
    'resize_keyboard'=>true,
    'keyboard'=>[
[['text'=>"üë• Takliflar"],['text'=>"üí∞ Xarid qilish"]],
    [['text'=>"üîôOrtga qaytish"]],
]
]);

$bot_menu = json_encode([
    'resize_keyboard'=>true,
     'keyboard'=>[
[['text'=>"üÜìÔ∏è Bepul bot"],['text'=>"üí∞ Pullik bot"]],
[['text'=>"üë§ Guruhchi bot"],['text'=>"üî•Antiqa botlar"]],
[['text'=>"üîôOrtga qaytish"]]
]
]);

$yordam_menu = json_encode([
  'resize_keyboard'=>true,
  'keyboard'=>[
   [['text'=>"üìûMurojaat"],['text'=>"‚ö°Tizim yangiliklari"]],
      [['text'=>"‚ÑπÔ∏èBot haqida"],['text'=>"üìΩÔ∏èVideo qo ªllanma"]],
      [['text'=>"üîôOrtga qaytish"]],
      ]
      ]);
      
$boshqar_menu = json_encode([
  'resize_keyboard'=>true,
  'keyboard'=>[
    [['text'=>"‚ûï Bot qo'shish"],['text'=>"‚öôÔ∏è Botni sozlash"]],
    [['text'=>"üîôOrtga qaytish"]],
    ]
    ]);
    
  $Maxsus_menu = json_encode([
    'resize_keyboard'=>true,
    'keyboard'=>[
[['text'=>"üòäSmile Games"],['text'=>"üá∫üáøSo'm bot v0.1"]],
[['text'=>"‚úÖ Nik bot v0.3 bot"],['text'=>"üïãQuron bot"]],
    [['text'=>"üîô Orqaga qayt"]],
    ]
    ]);

$pro_menu = json_encode([
    'resize_keyboard'=>true,
    'keyboard'=>[
[['text'=>"‚ûïNakrutka bot"],['text'=>"üë§Obunachi v0.1"]],
[['text'=>"üí∞Pul bot (rubl)"],['text'=>"üí∞Pul bot (so'm)"]],
[['text'=>"üì¶Uc bot"],['text'=>"üá∫üá∏Usa bot"]],
[['text'=>"üì¶BC bot"],['text'=>"üì¶MB bot"]],
    [['text'=>"üîô Orqaga qayt"]],
    ]
    ]);
   
$antiqa_menu = json_encode([
    'resize_keyboard'=>true,
    'keyboard'=>[
[['text'=>"üòç Smile"]],
[['text'=>"üñ§MyGame"],['text'=>"üí´Nik Bot v.03"]],
[['text'=>"üîêZip Bot"],['text'=>"üîô Orqaga qayt"]],
    ]
    ]);

$gr_menu = json_encode([
    'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üîó Join pro"],['text'=>"üñá Joinhider pro"]],
[['text'=>"üìà Reyting pro"],['text'=>"ü§ì Suhbatdosh pro"]],
[['text'=>"üõ† Sanovchi pro"],['text'=>"üëÆ‚Äç‚ôÇÔ∏è Posbon pro"]],
    [['text'=>"üîô Orqaga qayt"]],
    ]
    ]);
$sozlash_menu = json_encode([
    'resize_keyboard'=>true,
    'keyboard'=>[
      [['text'=>"üìã Mening botim"],['text'=>"üóëÔ∏è Botni o'chirish"]],
[['text'=>"üîôOrtga qaytish"]],
      ]
      ]);
      
$back_menu = json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üîôOrtga qaytish"]]
]
]);

$bek_menu = json_encode([
      'resize_keyboard'=>true,
      'keyboard'=>[
          [['text'=>"‚¨ÖÔ∏èOrqaga"]],
          ]
          ]);
       
       $ketik_menu = json_encode([
         'resize_keyboard'=>true,
         'keyboard'=>[
           [['text'=>"üîô Orqaga qayt"]],
           ]
           ]);
           
$chiq_menu = json_encode([
     'resize_keyboard'=>true,
     'keyboard'=>[
          [['text'=>"‚¨ÖÔ∏è ortga"]],
          ]
          ]);
          
  $kar_menu = json_encode([
    'resize_keyboard'=>true,
    'keyboard'=>[
      [['text'=>"‚¨ÖÔ∏è Orqaga"]],
      ]
      ]);
      
  $kar_menu1 = json_encode([
    'resize_keyboard'=>true,
    'keyboard'=>[
      [['text'=>"‚¨ÖÔ∏èOrqaga qaytish"]],
      ]
      ]);
      
  $ka_menu = json_encode([
    'resize_keyboard'=>true,
    'keyboard'=>[
      [['text'=>"‚¨ÖÔ∏èOrqaga"]],
      ]
      ]);
      
$bekor_menu = json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üîôOrtga qaytish"]]
]
]);

$getss = file_get_contents("ban/banid.txt");
if(mb_stripos($getss, $tx)!==false){
bot('sendMessage',[
'chat_id' => $cid,
'text' => "Kechirasiz <b>$name</b> siz üö´bloklangansiz!",
'parse_mode'=>'html',
]); 
return false;
}

if(isset($message)){
    $get = file_get_contents("stat/usid.txt");
    if(mb_stripos($get,$fid)==false){
        file_put_contents("stat/usid.txt", "$get\n$fid");
        bot('sendMessage',[
'chat_id'=>-"$admin1",
          'text'=>"üòÑ Yangi a ºzo\nüë§ Ismi: $name\nüÜî raqami: $fid\n‚ú≥Ô∏è Usernamesi: @$username\nüí° Lichka: <a href='tg://user?id=$fid'>$name</a>",
'parse_mode'=>'html',
           'reply_markup'=>json_encode([
            'inline_keyboard'=>[
                [['text'=>"üõ†Ô∏èBot ochish",'url'=>"https://t.me/$bot"]],
              ]
              ])
          ]);
    }
}

if($inlineid !== NULL){
bot('answerInlineQuery',[
    'inline_query_id'=>$inline_id,
    'cache_time'=>1,
    'results'=>json_encode([
    ['type'=>'article',
    'id'=>1,
    'title'=>"‚úÖReferal havolangizni yuborish uchun bosing",
    'input_message_content'=>[
    'disable_web_page_preview'=>true,
    'parse_mode'=>'MarkDown',
    'message_text'=>"‚ö°Ô∏è Bir necha daqiqada o'z Telegram botingizga ega bo'ling!

‚¨áÔ∏è Buning uchun quyidagi botga kirish tugmasi orqali botimizga otib bot yarating!",
    ],
    'reply_markup'=>[
     'inline_keyboard'=>[
     [['text'=>"‚ûï Botga kirish",'url'=>"https://t.me/$bot?start=$inlineid"]]
     ]
     ]
     ],
])
]);
}

if ($tx == "/start"){
    if(joinchat($fid)=="true"){
    bot('sendMessage',[
    'chat_id' => $cid,
    'text' => "‚òá Salom $name

Sizni botda ko‚Äòrib turganimdan xursandman!
  @$botname  orqali siz o‚Äòzingizning shaxsiy botlaringizni hech qanday qiyinchiliklarsiz yaratishingiz mumkin!

<b>‚¨á Ishni boshlash uchun quyidagi tugmalardan foydalaning!</b>",
    'parse_mode'=>'html',
    'reply_markup'=>$main_menu
    ]);
}
} elseif (mb_stripos($tx, "/start")!==false) {
    if(joinchat($fid)=="true"){
        bot('sendMessage',[
        'chat_id' => $cid,
        'text' => "‚òá Salom $name

Sizni botda ko‚Äòrib turganimdan xursandman!
@$botname orqali siz o‚Äòzingizning shaxsiy botlaringizni hech qanday qiyinchiliklarsiz yaratishingiz mumkin!

<b>‚¨á Ishni boshlash uchun quyidagi tugmalardan foydalaning!</b>",
        'parse_mode'=>'html',
        'reply_markup'=>$main_menu
        ]);
        
        if(mb_stripos($stat, $fid)==false){
        $ex = explode(" ", $tx);
        if($ex[1] == $cid){
        }else{
        $olmos = file_get_contents("referal/$ex[1].txt");
        $olmoslar = $olmos + 5;
        file_put_contents("referal/$ex[1].txt", $olmoslar);
        bot('sendMessage',[
        'chat_id'=>$ex[1],
        'text'=>"üì°<i>Tabriklaymiz siz botimizga do'stingizni taklif qildingiz va do'stingiz kanalimizga a'zo bo'ldi buning uchun sizga 5 ta olmos berildi</i>!",
        'parse_mode'=>'html'
        ]);
        }
        }

    }else{
        if(mb_stripos($stat, $fid)==false){      
        $ex = explode(" ", $tx);
        if($ex[1] == $cid){
        }else{
        bot('sendMessage',[
        'chat_id'=>$ex[1],
        'text'=>"üì°<i>Tabriklaymiz siz botimizga do'stingizni taklif qildingiz! Ammo do'stingiz kanalimizga hali a'zo bo'lmadi. Do'stingiz kanalimizga a'zo bo'lsa sizga 5 olmos beriladi!</i>",
        'parse_mode'=>'html'
        ]);
        file_put_contents("referal/$fid.referal", $ex[1]);
    }
    }else{
        unlink("referal/$fid.referal");
    }
    }
}


if($data == "result"){
    if(joinchat($ccid) == "true"){
        bot('deleteMessage',[
        'chat_id'=>$ccid,
        'message_id'=>$cmid
        ]); 

        if($referalcid == true){
        $olmos = file_get_contents("referal/$referalcid.txt");
        $olmoslar = $olmos + 5;
        file_put_contents("referal/$referalcid.txt", $olmoslar);
         bot('sendMessage',[
        'chat_id'=>$referalcid,
        'text'=>"üîî<i>Tabriklaymiz do'stingiz kanalimizga a'zo bo'ldi va sizga 5 ta olmos berildi!</i> ",
        'parse_mode'=>'html'
        ]);
         unlink("referal/$ccid.referal");
     }

        bot('sendMessage',[
        'chat_id'=>$ccid,
        'text'=>"<b>Yaxshi siz bizning kanalimizga a'zo bo'ldingiz!</b>\n\n<b>‚¨áÔ∏èIshni boshlash uchun quyidagi tugmalardan foydalaning</b>",
        'parse_mode'=>"html",
        'reply_markup'=>$main_menu
        ]);
    }else{
        bot("answerCallbackQuery",[
        "callback_query_id"=>$callid,
        "text"=>"‚ùåSiz hali kanalimizga a ºzo bo ªlmadingiz!",
        "show_alert"=>true,
        ]);
    }
}

if($tx == "üîôOrtga qaytish" and joinchat($fid)=="true"){
    unlink("step/$fid.txt");
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚ùå <b>Bekor qilindi!</b>",
    'parse_mode'=>"html",
    'reply_markup'=>$main_menu
    ]);
}

if($tx == "‚¨ÖÔ∏èOrqaga" and joinchat($fid)=="true"){
    bot('sendMessage',[
        'chat_id'=>$cid,
        'text'=>"Quyidagi menyudan foydalaningüëá",
        'parse_mode'=>"html",
        'reply_markup'=>$boshqar_menu,
        ]);
}

if($tx == "üîô Orqaga qayt" and joinchat($fid)=="true"){
    bot('sendMessage',[
        'chat_id'=>$cid,
        'text'=>"Quyidagi menyudan foydalaningüëá",
        'parse_mode'=>"html",
        'reply_markup'=>$bot_menu,
        ]);
}


if($tx == "‚¨ÖÔ∏è ortga" and joinchat($fid)=="true"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"Quyidagi menyudan foydalaning üëá",
    'parse_mode'=>"html",
    'reply_markup'=>$boshqar_menu
    ]);
}

if($tx == "‚¨ÖÔ∏è Orqaga" and joinchat($fid)=="true"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"Quyidagi botlardan foydalaning üëá",
    'parse_mode'=>"html",
    'reply_markup'=>$Maxsus_menu
    ]);
}

if($tx == "‚¨ÖÔ∏èOrqaga" and joinchat($fid)=="true"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"Quyidagi botlardan foydalaning üëá",
    'parse_mode'=>"html",
    'reply_markup'=>$pro_menu
    ]);
}
if($tx == "‚¨ÖÔ∏èOrqaga qaytish" and joinchat($fid)=="true"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"Quyidagi botlardan foydalaning üëá",
    'parse_mode'=>"html",
    'reply_markup'=>$gr_menu
    ]);
}

if($tx == "üîôOrtga qaytish" and joinchat($fid)=="true"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"üñ• Bosh sahifaga qaytdingiz",
    'parse_mode'=>"html",
    'reply_markup'=>$main_menu
    ]);
}

if($tx == "üõ†Botlarni boshqarish" and joinchat($fid)=="true"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚ÑπÔ∏è Yangi bot yaratish uchun quyidagi tugmani bosing:
¬´‚ûï Bot qo ªshish¬ª

‚ÑπÔ∏è Tayyor botni o ªchirish yoki sozlash uchun quyidagi tugmani bosing:
¬´‚öôÔ∏èBotni sozlash¬ª",
    'parse_mode'=>'html',
    'reply_markup'=>$boshqar_menu
    ]);
}

if($tx == "‚ûï Bot qo'shish" and joinchat($fid)=="true"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"Qanday turdagi botlarni yaratamizüëá",
    'reply_markup'=>$bot_menu,
    ]);
}

if($tx == "üÜìÔ∏è Bepul bot"){
bot('sendMessage',[
'chat_id'=>$cid,
   'text'=>"<b>üìã Quyidagilardan birini tanlang:</b>",
    'parse_mode'=>'html',
'reply_markup'=>$Maxsus_menu
]);
}

if($tx == "üí∞ Pullik bot"){
bot('sendMessage',[
'chat_id'=>$cid,
   'text'=>"<b>üìã Quyidagilardan birini tanlang:</b>",
    'parse_mode'=>'html',
'reply_markup'=>$pro_menu
]);	
}
if($tx=="üî•Antiqa botlar"){
	bot('sendMessage',[
	'chat_id'=>$cid,
	'text'=>"botlardan birini tanlang",
    'parse_mode'=>'html',
	'reply_markup'=>$antiqa_menu,
]);
}
if($tx == "üë§ Guruhchi bot"){
bot('sendMessage',[
'chat_id'=>$cid,
   'text'=>"<b>üìã Quyidagilardan birini tanlang:</b>",
    'parse_mode'=>'html',
'reply_markup'=>$gr_menu
]);	
}
if($tx == "‚öôÔ∏è Botni sozlash" and joinchat($fid)=="true"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚öôÔ∏èBotni sozlash panelidasiz..üëá",
    'reply_markup'=>$sozlash_menu,
    ]);
}
if($tx == "üìã Mening botim" and joinchat($fid)=="true"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"Tez kunda....",
    'reply_markup'=>$chiq_menu,
    ]);
}

if($tx == "üóëÔ∏è Botni o'chirish" and joinchat($fid)=="true"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"Tez kunda....",
    'reply_markup'=>$chiq_menu,
    ]);
}


if($tx == "üì±Kabinet" and joinchat($fid)=="true"){
    $get = file_get_contents("referal/$fid.txt");
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"<i>üóÑ Kabinetingizga xush kelibsiz!

üíµ Sizning balansingiz: $get olmos
üë• Sizning takliflaringiz: $soni ta

‚ùó‚ùóBot hisobingizni Qiwi orqali to‚Äòldiryotgangizda izoh qoldirishni unutmang!</i>",
     'parse_mode'=>"html",
'reply_markup'=>json_encode([
            'inline_keyboard'=>[
                [['text'=>"üí≥Hisobni to'ldirish",'callback_data'=>"toldir"],['text'=>"üîÑ Almashish",'callback_data'=>"almashish"]],
            ]
        ])
]);
}

if($data == "almashish"){
	bot('deleteMessage',[
	'chat_id'=>$ccid,
	'message_id'=>$cmid,
]);
bot('sendmessage',[
'chat_id'=>$ccid,
'text'=>"<i>‚ö†Ô∏è Yodingizda tuting, almashilgan pullaringizni avvalgi holatga qaytara olmaysiz!</i>

<b>üßÆ Qancha pulingizni almashmoqchisiz?
Quyidagi tartibda yozing!</b>

<code>/almashish
$cfid
1000</code>

<b>@$botname</b>",
'parse_mode'=>'html',
'reply_markup'=>$back_menu,
]);
}

if(mb_stripos($tx,"/almashish")!==false){
$id = explode("\n", $text);
$id1 = $id[1]; $id2 = $id[2];
$olmos = file_get_contents("referal/$id1.txt");
$miqdor = $olmos+$id2;
file_put_contents("referal/$id1.txt","$miqdor");
$olmos = file_get_contents("referal/$cid.txt");
$odam = file_get_contents("odam/$cid.dat");
if($olmos>=$id2){
$olmos = file_get_contents("referal/$cid.txt");
$mm=$olmos-$id2;
file_put_contents("referal/$cid.txt","$mm");
bot('sendmessage',[
'chat_id'=>$cid,
'text'=>"üí≥<b>Hisobingizdan $id2 olmos ayirildi!</b>.",
'parse_mode'=>'html',
'reply_markup'=>$main_menu,
]);
bot('sendmessage',[
'chat_id'=>$id1,
'text'=>"<b>üì® Yangi xabarnoma:
üéØSizning hisobingiz to‚Äòldirildi!
üí∞Miqdor: $id2 olmos
‚ôªÔ∏èHolat: Muvaffaqiyatli 
üóìVaqti: ‚è∞ $soat üìÜ$sana</b>.",
'parse_mode'=>'html',
'reply_markup'=>$main_menu,
]);
}else{
bot('sendmessage',[
'chat_id'=>$cid,
'text'=>"<b>‚ö†Ô∏è Almashish uchun balansingizda ushbu summa mavjud emas! Qayta urinib ko'ring:</b>",
'parse_mode'=>'html',
]);
$olmos = file_get_contents("referal/$id1.txt");
$miqdor = $olmos+$id2;
file_put_contents("referal/$id1.txt","$miqdor");
bot('sendmessage',[
'chat_id'=>$cid,
]);
}
}

if($data == "toldir"){
        bot('deleteMessage',[
        'chat_id'=>$ccid,
        'message_id'=>$cmid,
]);
     bot('SendMessage',[
        'chat_id'=>$ccid,
        'text'=>"üìã Quyidagilardan birini tanlang:",
        'reply_markup'=>json_encode([
        'inline_keyboard'=>[
[['text'=>"üí≥Karta so'm",'callback_data'=>"qiwi"],['text'=>"üî• Paynet",'callback_data'=>"paynet"]],
[['text'=>"ü•ù Qiwi rub",'callback_data'=>"click"]],
]
])
]);
}


if($data == "orqa"){
        bot('editMessageText',[
        'chat_id'=>$ccid,
        'message_id'=>$cmid,
        'text'=>"üìã Quyidagilardan birini tanlang:",
        'reply_markup'=>json_encode([
        'inline_keyboard'=>[
[['text'=>"üí≥karta so'm",'callback_data'=>"qiwi"],['text'=>"üî• Paynet",'callback_data'=>"paynet"]],
[['text'=>"ü•ù Qiwi rub",'callback_data'=>"click"]],
]
])
]);
}


if($data == "qiwi"){
	bot('editMessageText',[
	'chat_id'=>$ccid,
	'message_id'=>$cmid,
	'text'=>"üìã To'lov tizimi: Click
üí° Avto to'lov holati: OF

üí≥ Hamyon ( yoki karta )
1 olmos narxi 140 so'm

Ushbu raqamga to'lov qilib to'lpv haqidagi chekni adminga yoboring",
'reply_markup'=>json_encode([
'inline_keyboard'=>[
[['text'=>"‚òéÔ∏è Tex. Yordam",'url'=>"https://t.me/$adminuser"]],
[['text'=>"‚óÄÔ∏èOrtga",'callback_data'=>"orqa"]],
]
])
]);
}

if($data == "paynet"){
	bot('editMessageText',[
	'chat_id'=>$ccid,
	'message_id'=>$cmid,
	'text'=>"üìã To'lov tizimi: PAYNET
üí° Avto to'lov holati: OF

üí≥ telefon raqam - 
üìä1 ta olmos 140 so'm

Qo'shimcha: To'lovni amalga oshirgach biz bilan bog'laning.",
'reply_markup'=>json_encode([
'inline_keyboard'=>[
[['text'=>"‚òéÔ∏è Tex. Yordam",'url'=>"https://t.me/$adminuser"]],
[['text'=>"‚óÄÔ∏èOrtga",'callback_data'=>"orqa"]],
]
])
]);
}

if($data == "click"){
	bot('editMessageText',[
	'chat_id'=>$ccid,
	'message_id'=>$cmid,
	'text'=>"üìã To'lov tizimi: Qiwi
üí° Avto to'lov holati: OF

üí≥ Hamyon Admin orqali
üìù10 ta olmos 1 rubl

Ushbu raqamga qiwi orqali to'lov qilgach to'lov chekini adminga yuboring.",
'reply_markup'=>json_encode([
'inline_keyboard'=>[
[['text'=>"‚òéÔ∏è Tex. Yordam",'url'=>"https://t.me/$adminuser"]],
[['text'=>"‚óÄÔ∏èOrtga",'callback_data'=>"orqa"]],
]
])
]);
}

if($tx == "üí∏ Pul ishlash"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"üí∏ Qanday usulda pul ishlashni hohlaysiz?

‚ÄºÔ∏è Bot orqali yig'gan pullaringizni yechib olomaysiz. Mablag'laringizni botimizdagi har qanday xaridlar uchun sarflashingiz mumkin.",
    'reply_markup'=>$pul_menu
   ]);
}
if($tx == "üë• Takliflar" and joinchat($fid)=="true"){ 
    bot('sendMessage',[ 
    'chat_id'=>$cid, 
    'text'=>"üìåQuyidagi havolani do'stlaringizga tarqatib olmos yig'ing:\n<code>https://t.me/$botname?start=$cid</code>\n\nEslatib o'tamiz har bir do'stingiz sizga <b>5</b> ta olmos beradi!\nDo'stingiz kanalimizga a'zo bo'lmasa sizga olmos berilmaydi!‚úÖ", 
    'parse_mode'=>"html", 
    'disable_web_page_preview'=>true, 
    'reply_markup'=>$pul_menu
    ]); 
} 

if($tx == "üí∞ Xarid qilish" and joinchat($fid)=="true"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"üíµ Hisobni to ªldirish usulini tanlang:",
'parse_mode'=>'html',
'reply_markup'=>json_encode([
            'inline_keyboard'=>[
           [['text'=>"üí† Click ",'callback_data'=>"qiwi"],['text'=>"üî• Paynet",'callback_data'=>"paynet"]],
[['text'=>"ü•ù Qiwi",'callback_data'=>"click"]],
]
])
]);
}


if($tx == "üìö Qo'llanma" and joinchat($fid)=="true"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"üí° <b>@$bot jamoasi:</b>
	
<i>Telegram tarmog‚Äòidagi eng yangi loyiha 
@$botname siz bu bot orqali php dasturlash tillarini bilmasdan turib ham bot yaratish imkoniyatiga egasiz!</i>

‚öô<b> Tizim versiyasi: v0.8.0</b>",
'parse_mode'=>'html',
'reply_markup'=>json_encode([
'inline_keyboard'=>[
[['text'=>"üìã Ma'lumot",'callback_data'=>"noma"],['text'=>"‚ö†Ô∏è Qoidalar",'callback_data'=>"qoida"]],
[['text'=>"üìπ Video qo'llanma",'url'=>"qol"]],
]
])
]);
}


if($data == "malumot"){
	bot('editMessageText',[
	'chat_id'=>$ccid,
	'message_id'=>$cmid,
	'text'=>"üí° <b>@$bot jamoasi:</b>
	
<i>Telegram tarmog‚Äòidagi eng yangi loyiha 
@$botname siz bu bot orqali php dasturlash tillarini bilmasdan turib ham bot yaratish imkoniyatiga egasiz!</i>

‚öô<b>Tizim versiyasi: v0.8.0</b>",
'parse_mode'=>'html',
'reply_markup'=>json_encode([
'inline_keyboard'=>[
[['text'=>"üìã Ma'lumot",'callback_data'=>"noma"],['text'=>"‚ö†Ô∏è Qoidalar",'callback_data'=>"qoida"]],
[['text'=>"üìπ Video qo'llanma",'url'=>"qol"]],
]
])
]);
}


if($data=="noma"){
bot('editMessageText',[
'chat_id'=>$ccid,
'message_id'=>$cmid,
'text'=>"ü§ñ <b>Bot yaratish qo'llanmasi!

1. Telegram dasturingizdan @BotFather deb qidiring va START tugmasini bosing!

2. @BotFather ga /newbot buyrug'ini yozing.

3. Yaratmoqchi bo'lgan botingiz NOMINI yozing.

4. Botingiz BOTNAMEsini yozing (botname oxiri  bot  yoki robot bilan tugashi kerak).

5. Agar amallarni to'g'ri bajargan bo'lsangiz sizga @BotFather botingiz Tokenini yuboradi uni saqlab qo'ying!

6. Bot yaratayotganingizda botimiz Token so'raganida @BotFather yuborgan tokeni yuborasiz.

‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ

‚ùóESLATMA: </b>

‚ö†Ô∏è<i>Qoidalarga rioya qilmagan foydalanuvchi botdan blocklarnishi mumkin.</i>",
'parse_mode'=>"html",
'reply_markup'=>json_encode([
'inline_keyboard'=>[
[['text'=>"‚óÄÔ∏è Ortga",'callback_data'=>"malumot"]],
]
])
]);
}

if($data == "qoida"){
	bot('EditMessageText',[
	'chat_id'=>$ccid,
	'message_id'=>$cmid,
	'text'=>"<b>‚ö†Ô∏è Qoidalar:</b>
    
<i>1. Ushbu robot maker bot adminstratorlari va bot  dasturchisi foydalanuvchilardan quydagilarni o'z zimmasiga olmasligi haqida sizga eslatib o'tadi:
1.1 ushbu botdan foydalangan holda ochilgan barcha botlar sizga pul to'lashi yoki to'lamasligj bu bizga bog'liq emas va biz sizga pul to'lamaymiz!
1.2 agar sizga ushbu botlar server orqali pul to'laydi deyishsa ishonmang yoki o'zingizda shunday xayol bo'lsa buni uniting chunki bu aqilsiz gap!
1.3 ushbu robot orqali bot ochgan zahotingiz barcha shart va qoidalar bilan tanishganingizni va rozi ekanligingizni o'z zimangizga olasiz!</i>

<b>2. ‚ö†Ô∏èOgohlantiramiz:</b>
<i>2.1 Taniqli shaxslar, mashxur savdo belgilari, kampaniya tashkilot nomlari, telegram kanal va veb-saytlar nomidan soxta bot ochib ish yuritish taqiqlanadi bunga ko'ra sizga tashkilot tomonidan ogohlantirish berilmaydi va ish sud tartibida ko'rib chiqiladi.
2.2 Foydalanuvchi tomonidan kiritilgan xar qanday ma'lumot va manbalar uchinchi shaxsga oshkor etilmaydi.
2.3 Foydalanuvchi tomonidan yasalagan botlarda quydagilar qatiyan taqiqlanadi!
+18 manba kanal va guruhlarga obunachi yig'ishda foydalanish.
Diniy aqidaparastlik kanalarda foydalanish.
Davlat siyosatiga zid yoki yolg'on manbalar tarqatuvchi kanalarga ulash va boshqlar...</i>

<b>3. ‚ùóEslatib o'tamiz:</b>
<i>‚àö botlar 100% xafsiz va faqat O'zbekistondagi telegram foydalanuvchilari foydalana oladi
‚àö barcha raqamlar barcha xisoblar o'chirilishidan avval sizni ogohlantiramiz.
‚àö qo'llab - quvvatlash xizmati sizga 24/7 soat davomida xizmat ko'rsatadi.
‚àö Sizning ma'lumotlaringiz xech kim tomonidan qayta ko'rib chiqilmaydi (2.1 dan tashqari hollarda)</i>",
	'parse_mode'=>'html',
	'reply_markup'=>json_encode([
	'inline_keyboard'=>[
	[['text'=>"‚óÄÔ∏è Ortga",'callback_data'=>"malumot"]],
]
])
]);
}

if($tx=="qol"){ 
      bot('sendVideo',[ 
        'chat_id'=>$cid,
        'video'=>"https://t.me/MakerUz_News/100",
        'caption'=>"ü§ñBotimizning qo'lash videosi bu video bizning yotube kanalimizga hamda botimmizga ham joylanadi.‚úÖ

üõ†Bot : @$bot

üé•Video mualifi : @$adminuser

üõ†Qanday mumao bolsa : @$adminuser ga yozing!", 
        'reply_markup'=>json_encode([
	'inline_keyboard'=>[
	[['text'=>"‚óÄÔ∏è Ortga",'callback_data'=>"malumot"]],
]
])
]); 
}

if($tx == "üìä Statistika" and joinchat($fid)=="true"){
    $us = file_get_contents("stat/usid.txt");
    $uscount = substr_count($us, "\n");
    $bot = file_get_contents("stat/stat.txt");
    $botpro = file_get_contents("stat/statpro.txt");
    $all = $bot + $botpro;
    bot('sendMessage',[
    'chat_id' => $cid,
    'text'=>"üìä Statistika\nBot a'zolari soni: *$uscount* ta\nJami yasalgan oddiy botlar: *$bot* ta\nJami yasalgan pro botlar: *$botpro* ta\nJami yasalgan botlar: *$all* ta\n\n‚è∞$time  üìÜ$sana",
    'parse_mode'=>"markdown",
    'reply_markup'=>$main_menu
    ]);
}

if($tx == "‚ùì Yordam" and joinchat($fid)=="true"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚ùìSiz Yordam menusidasiz.\n\nüìã Yordam olish uchun buyruqlardan foydalaning:",
    'reply_markup'=>$yordam_menu
    ]);
}
if($tx=="üìûMurojaat" and joinchat($fid)=="true"){
	bot('sendmessage',[
	'chat_id'=>$cid,
	'text'=>"üìû Sizda biror g ªoya, taklif yoki murojaat bo ªlsa bizga murojaat qiling:
@$adminuser

üìÇ Texnik qo ªllab-quvvatlash uchun guruhimizga qo ªshiling:
@VipBuilder_UzBot",

	'parse_mode'=>'html',
	'reply_markup'=>$yordam_menu
	]);
}
if($tx=="‚ö°Tizim yangiliklari"and joinchat($fid)=="true"){
	bot('sendmessage',[
	'chat_id'=>$cid,
	'text'=>"üìÇ Bot yuzasidagi barcha yangiliklar @uz_makerbot__News kanalida yetkazib boriladi.

üóÑ Kanalga obuna bo ªlishingizni so ªraymiz! Bu siz uchun muhim!",

	'parse_mode'=>'html',
	'reply_markup'=>$yordam_menu
	]);
}
if($tx=="‚ÑπÔ∏èBot haqida"and joinchat($fid)=="true"){
	bot('sendmessage',[
	'chat_id'=>$cid,
	'text'=>"‚ÑπÔ∏è Ushbu bot orqali siz hech qanday dasturlash tillarini bilmasdan turib va hech qanday hostinglarsiz oson bot yasay olasiz.

‚úÖ Imkoniyatlar
üëâ Bepul hostingdan bot yarating
üëâ Do'stlarni taklif qiling
üëâ Har kunlik bonus oling
üëâ Dasturlangan bot yarating.

üá∫üáø Hamma botlar soni:  ta

‚ôªÔ∏è Bot versiyasi: 4.1

üõ† Dasturchi: @$adminuser",

	'parse_mode'=>'html',
	'reply_markup'=>$yordam_menu,
	]);
}

if($tx=="üìΩÔ∏èVideo qo ªllanma"){ 
      bot('sendVideo',[ 
        'chat_id'=>$cid,
        'video'=>"https://t.me/MakerUz_News/100",
        'caption'=>"ü§ñBotimizning qo'lash videosi bu video bizning yotube kanalimizga hamda botimmizga ham joylanadi.‚úÖ

üõ†Bot : @$bot

üé•Video mualifi : @$adminuser

üõ†Qanday mumao bolsa : @MASTER_PHP_1!", 
        'reply_markup'=>$yordam_menu,
]); 
}

//panel

if($text=="üé´ Promokod yaratish"){
bot("sendmessage",[
'chat_id'=>$admin,
'text'=>" üé´ Promokod yasash uchun
/promo promokod
masalan
<code>/promo 79j585h67ht</code>",
'parse_mode'=>'html',
'reply_markup'=>$back4_menu,
]);
}
$promo = file_get_contents("ch1.txt");
$ball = file_get_contents("ch2.txt");
$aa = "$ch1";  //promokod yuboriladigan kanal id raqami
$ab = "$ch1"; //promokod ishlatilganligi haqida yuboriladigan kanalid raqami
if(mb_stripos($text, "/promo")!==false){
if($cid == $admin){
	$m1 = explode(" ",$text);
 $m2 = $m1[1];
 file_put_contents("ch1.txt","$m2");
 bot('sendMessage',[
'chat_id'=>$admin,
'text'=>"üé´ Promokod $promo
qancha olmos berilsin
/ball olmos miqdori yozing
Masalan
<code>/ball 250</code>",
'parse_mode'=>'html',
]);
}
}

if(mb_stripos($text, "/ball")!==false){
if($cid == $admin){
	$m1 = explode(" ",$text);
 $m2 = $m1[1];
 file_put_contents("ch2.txt","$m2");
 bot('sendMessage',[
'chat_id'=>$admin,
'text'=>"üé´<b> Promokod kanalga yuborildi ‚úÖ</b> ",
'parse_mode'=>'html',
'reply_markup'=>$panel,
 ]);
 bot("sendmessage",[
 'chat_id'=>$aa,
 'text'=>"<i>üé´ Yangi Promokod.

ü§ñ Botga kirish -> @$botname 
üîΩ Ishlatish uchun pastdagi tugmani bosing.</i>

<b>üé´ Promokod tashlangan vaqt: $soat</b>",
 'parse_mode'=>'html',
 'reply_markup'=>json_encode([
 'inline_keyboard'=>[
[['text'=>"üé´ Promokodni ishlatish", "url"=>"https://t.me/$bot?start=$promo"]],
]
])
]);
}
}

if($text=="/start $promo"){
$olmos = file_get_contents("referal/$cid.txt");
$miqdor = $olmos + $ball;
file_put_contents("referal/$cid.txt","$miqdor");
bot("sendmessage",[
'chat_id'=>$cid,
'text'=>"<i>‚úÖ Promo kod to'g'ri sizga $ball olmos berildi!</i>",
'parse_mode'=>"html",
]);
unlink("ch1.txt");
bot('sendMessage',[
'chat_id'=>$ab,
'text'=>"<i>‚ö†Ô∏è Diqqat tepadagi promokod ishlatildi.
Endi undan qayta foydalanib bo'lmaydi!
Promokoddan @$username foydalandi 
va unga $ball olmos taqdim etildi ‚úÖ</i>

<b>üé´ Promokod ishlatilgan vaqt: $soat</b>",
'parse_mode'=>'html',
]);
unlink("ch2.txt");
}




$step1 = file_get_contents("minus/$fid.txt");
$glavniadmin = "ADMIN_ID"; //bosh admin ID raqami
$admins = file_get_contents("admins.txt");
$kanals = file_get_contents("kanals.txt");
//<------- admin-------> 

if(($tx == "/panel") and $cid==$admin){
    bot('deleteMessage',['chat_id'=>$cid,'message_id'=>$mid]);
    bot('sendMessage',[
    'chat_id'=>$admin,
    'text'=>"<b>üë®‚ÄçüíªAdmin panelga xush kelibsiz.</b>",
    'parse_mode'=>"html",
    'reply_markup'=>$panel,
]);
}
if($tx == "/admin" and $cid == $admins){
    bot('sendMessage',[
    'chat_id'=>$admins,
    'text'=>"<b>üë®‚ÄçüíªAdmin panelga xush kelibsiz.</b>",
    'parse_mode'=>"html",
    'reply_markup'=>$yordamchipanel,
    ]);
}
$yordamchipanel = json_encode([
    'resize_keyboard'=>true,
    'keyboard'=>[
        [['text'=>"‚ùå OFF"],['text'=>"‚úÖ ON"]],
        [['text'=>"üîí Ad Blok"],['text'=>"üîì Remove Blok"]],
        [['text'=>"‚ÜóÔ∏è Forward"]],
        [['text'=>"‚ÜóÔ∏è Xabar Yozish"]],
        [['text'=>"‚ÜóÔ∏è Xabar Userga"]],
    ]
    ]);
    if($text == "‚ùå OFF" && $cid == $admins){
        file_put_contents("on.txt","off");
        bot('sendmessage',[
            'chat_id'=>$cid,
            'text'=>"‚ö†Ô∏è<b>Offline.</b>",
          'parse_mode'=>'html',
        ]);
        }
        //yoqish
        if($text == "‚úÖ ON" && $cid == $admins){
        file_put_contents("on.txt","on");
        bot('sendmessage',[
            'chat_id'=>$cid,
            'text'=>"‚ö†Ô∏è<b>Online</b>",
          'parse_mode'=>'html',
        ]);
        }
    //
    $rpl = json_encode([
        'resize_keyboard'=>false,
        'force_reply'=>true,
        'selective'=>true,
      ]);
      //blockdan olish
       if($type=="private"){
      if($text == "üîì Remove Blok" and $cid==$admins){
      bot('sendmessage', [
            'chat_id' =>$cid,
             'text' => "üö´Blockdan Olinadigan üÜîÔ∏èni Yozing!" ,
             'parse_mode'=>'markdown',  
             'reply_markup'=>$rpl,
             ]);
             }}
             if($reply == "üö´Blockdan Olinadigan üÜîÔ∏èni Yozing!"){  
      $fayl = file_get_contents("block.db");
      $fayl2 = "$text";
      $fayl3 = str_replace($fayl2," ",$fayl);
      file_put_contents("block.db","$fayl3");
      $fayl = file_get_contents("block.db");
      bot('sendmessage', [
            'chat_id' =>$cid,
             'text' => "[$text](tg://user?id=$text)  Bandan olindi" ,
             'parse_mode'=>'markdown', 
      'reply_markup'=>$yordamchipanel,
            ]); 
            bot('sendmessage', [
            'chat_id' =>$sd,
             'text' => "üñê*Salom*  [$name](tg://user?id=$uid)  
      üòäSizga Xush Xabar Bor!
      Siz [üë®‚ÄçüíªAdminimiz](tg://user?id=$admins) Tomonidan Bandan Olindingiz!
      Endi Botni Ishlatishingiz mumkin ‚úÖ
      üîÉQayta /start Bosing!" ,
             'parse_mode'=>'markdown', 
             ]);
      }
      
      //Blocklash
      if($text=="üîí Ad Blok"){
      if($cid==$admins){
      bot('sendMessage',[
      'chat_id'=>$cid,
      'text'=>"Ban Qilinadigan üÜîni Yuboring!",
      'reply_markup'=>$rpl,
      ]);
      }
      }
      if($reply=="Ban Qilinadigan üÜîni Yuboring!"){
      file_put_contents("block.db","$blocks\n$text");
      bot('SendMessage',[
         'chat_id'=>$admins,
              'text'=>"‚úÖ[$text](tg://user?id=$text) *Banlandi!*", 
              'parse_mode'=>'markdown', 
      'reply_markup'=>$yordamchipanel,
              ]);
              bot('SendMessage',[
         'chat_id'=>$text,
              'text'=>"<b>‚ö†Ô∏èSizni bu botda bloklashdi. 
      üö´Endi botimizdan foydalana olmaysiz!
      ‚ùó Agar bu anglashilmovchilik bo'lda admin bilan bog'laning</b>", 
              'parse_mode'=>'html', 
              'reply_markup'=>json_encode([
              'inline_keyboard'=>[
         [["text"=>'üë®‚ÄçüíªAsminstrator', 'url'=>"https://t.me/ProUzbekCoder"]],
      ]
      ]),
      ]);
      }
      
      
      $blocks=file_get_contents("block.db");
      if(mb_stripos($blocks,"$uid")!==false){
      bot('sendMessage', [
      'chat_id'=>$cid,
      'parse_mode'=>"html",
      'text'=>"<b>üñêSalom <a href='tg:user?id=$cid'>$name</a> 
      Siz  Botimizdan foydalana olmaysiz, chunki Bot sizni bloklangan!
      Blokdan chiqish uchun üë®‚ÄçüíªAdmin ga yozing! Blokdan chiqmaguncha bot siz uchun ishlamaydi!üö´</b> " ,
      'reply_markup'=>json_encode([
      'inline_keyboard'=>[
      [['text'=>"Adminüë®‚Äçüíª", "url"=>"https://t.me/ProUzbekCoder"]],
      ]
      ])
      ]);return false;}

      $xabar1 = file_get_contents("send.txt");
if($text == "‚ÜóÔ∏è Xabar Yozish"){
if($cid == $admins){
bot('sendmessage',[
'chat_id'=>$admins,
'text'=>"*Foydalanuvchilarga yuboriladigan xabar matnini kiriting! Bekor qilish uchun /cancel ni bosing!*",
'parse_mode'=>"markdown",
]); file_put_contents("send.txt","user");
}else{
bot("sendmessage",[
'chat_id'=>$cid,
'text'=> "*<b>Bu bo‚Äòlimni faqat bot administratori ishlata oladi!</b>*",
'parse_mode'=>'Markdown',
]);
}
}
if($xabar1=="user" and $cid==$admins){
if($text=="/cancel"){
bot('sendmessage',[
'chat_id'=>$admins,
'text'=>"Bekor qilindi!",
'parse_mode'=>"html",
]); unlink("send.txt");
}else{
 $lichk = file_get_contents("shekih.db");
$lichkak = explode("\n",$lichk);
foreach($lichkak as $lichkalark){
$okuserk=bot("sendmessage",[
'chat_id'=>$lichkalark,
'text'=>$text,
'parse_mode'=>'html'
]);
}
}
}
if($okuserk){
bot("sendmessage",[
'chat_id'=>$admins,
'text'=>"Xabaringiz barcha bot foydalanuvchilariga yuborildi!",
'parse_mode'=>'html',
]); unlink("send.txt");
}

$lichkak=file_get_contents("shekih.db");
if($type=="private"){
if(strpos($lichkak,"$cid") !==false){
}else{
file_put_contents("shekih.db","$lichkak\n$cid");
}
}
//
if($text=="‚ÜóÔ∏è Forward" and $cid==$admins){
    bot('sendmessage',[
    'chat_id'=>$admins,
    'text'=>"Xabaringizni Yozing. Men Uni Forward Qilib Hammaga yuboraman!!",
    ]);
    file_put_contents("step/$fid.txt","forw");
    }
    
    if($userstep=="forw" and $cid==$admina){
    $userlark = explode("\n",$lichka);
    foreach($userlark as $usersk){
    $xabarokk=bot('ForwardMessage',[
    'chat_id'=>$usersk,
    'from_chat_id'=>$cid,
    'message_id'=>$mid,
    ]);
    }
    if($xabarokk){
    bot('sendmessage',[
    'chat_id'=>$admins,
    'text'=>"Xabar yetkazildi",
    ]);
      file_put_contents("step/$fid.txt","");
    }
    }
//
if($text == "‚ÜóÔ∏è Xabar Userga"){
    if($cid == $admins){
    bot('sendMessage', [
    'chat_id'=>$admins,
    'text'=>"‚úî Userga Xabar yuborish uchun
    /xabarcha üÜîÔ∏è Xabar 
    shu tarzda yuboring!
    
    üë®‚ÄçüíªAdmin: $adminuser",
    'reply_markup'=>$back,
    ]);
    }else{
    bot("sendmessage",[
    'chat_id'=>$cid,
    'text'=> "*ü§™üòÇ Bu funksiyani Faqat men @$userR ishlata olaman.*",
    'parse_mode'=>'Markdown',
    ]);
    }
    }
    if(mb_stripos($text,"/xabarcha") !== false){
    if($cid == $admins){
    $exs = explode(" ",$text);
    $sms1 = str_replace("/xabarcha $exs[1]","",$text);
    $ismi1 = $message->from->first_name;
    
    if(mb_stripos($exs[1],"@") !== false){
    $ssl1 = str_replace("@","",$exs[1]);
    $egasi = "t.me/$ssl1";
    }else{
    $egasis = "tg://user?id=$ex[1]";
    $eegasis = "$exs[1]";
    }
    bot('sendmessage',[
    'chat_id'=>$ex[1],
    'text'=>"üì®*Yangi Xabar*
    
    üë§ [$ismi](tg://user?id=$uid)
    
    *üì® Xabar: $sms1
    
    ‚ùÑ @$bot*",
    'parse_mode'=>"markdown", 
    ]);
    bot('sendmessage',[
    'chat_id'=>$admins,
    'text'=>"üë§[Foydalanuvchi]($egasis) ga Habaringiz Yuborildiüì©",
    'parse_mode'=>"markdown", 
    'reply_markup'=>$yordamchipanel
    ]);
    }else{
    bot("sendmessage",[
    'chat_id'=>$cid,
    'text'=> "*ü§™üòÇ Bu funksiyani Faqat men $adminuser ishlata olaman.*",
    'parse_mode'=>'Markdown',
    ]);
    }
}
$back = json_encode([
    'resize-keyboard'=>true,
    'keyboard'=>[
        [['text'=>"üîô Orqaga"]],
    ]
    ]);
if($text=="üîô Orqaga"){
    bot('sendMessage',[
        'chat_id'=>$cid,
        'text'=>"Siz Admin panelidasiz",
        'parse_mode'=>"html",
        'reply_markup'=>$panel,
    ]);
}

if($text=="‚ÜóÔ∏è Xabar yuborish" and $cid==$admin){
    bot('sendMessage',[
        'chat_id'=>$admin,
        'text'=>"Admin qanday turdagi xabar yubormoqchisiz:?",
        'parse_mode'=>"html",
        'reply_markup'=>json_encode([
            'resize_keyboard'=>true,
            'keyboard'=>[
                [['text'=>"‚ÜóÔ∏è Forward (Hammaga)"]],
                [['text'=>"‚ÜóÔ∏è Xabar (Hammaga)"]],
                [['text'=>"‚ÜóÔ∏è Xabar (Userga)"]],
                [['text'=>"üîô Orqaga"]],
            ]
        ])
    ]);
}

$xabar = file_get_contents("send.txt");
if($text == "‚ÜóÔ∏è Xabar (Hammaga)"){
if($cid == $admin){
bot('sendmessage',[
'chat_id'=>$admin,
'text'=>"*Foydalanuvchilarga yuboriladigan xabar matnini kiriting! Bekor qilish uchun /cancel ni bosing!*",
'parse_mode'=>"markdown",
]); file_put_contents("send.txt","user");
}else{
bot("sendmessage",[
'chat_id'=>$cid,
'text'=> "*<b>Bu bo‚Äòlimni faqat bot administratori ishlata oladi!</b>*",
'parse_mode'=>'Markdown',
]);
}
}
if($xabar=="user" and $cid==$admin){
if($text=="/cancel"){
bot('sendmessage',[
'chat_id'=>$admin,
'text'=>"Bekor qilindi!",
'parse_mode'=>"html",
]); unlink("send.txt");
}else{
 $lich = file_get_contents("shekih.db");
$lichka = explode("\n",$lich);
foreach($lichka as $lichkalar){
$okuser=bot("sendmessage",[
'chat_id'=>$lichkalar,
'text'=>$text,
'parse_mode'=>'html'
]);
}
}
}
if($okuser){
bot("sendmessage",[
'chat_id'=>$admin,
'text'=>"Xabaringiz barcha bot foydalanuvchilariga yuborildi!",
'parse_mode'=>'html',
]); unlink("send.txt");
}

$lichka=file_get_contents("shekih.db");
if($type=="private"){
if(strpos($lichka,"$cid") !==false){
}else{
file_put_contents("shekih.db","$lichka\n$cid");
}
}
//
if($text=="‚ÜóÔ∏è Forward (Hammaga)" and $cid==$admin){
    bot('sendmessage',[
    'chat_id'=>$admin,
    'text'=>"Xabaringizni Yozing. Men Uni Forward Qilib Hammaga yuboraman!!",
    ]);
    file_put_contents("step/$fid.txt","forward");
    }
    
    if($step=="forward" and $cid==$admin){
    $userlar = explode("\n",$lichka);
    foreach($userlar as $users){
    $xabarok=bot('ForwardMessage',[
    'chat_id'=>$users,
    'from_chat_id'=>$cid,
    'message_id'=>$mid,
    ]);
    }
    if($xabarok){
    bot('sendmessage',[
    'chat_id'=>$admin,
    'text'=>"Xabar yetkazildi",
    ]);
      file_put_contents("step/$fid.txt","");
    }
    }
//
if($text == "‚ÜóÔ∏è Xabar (Userga)"){
    if($cid == $admin){
    bot('sendMessage', [
    'chat_id'=>$admin,
    'text'=>"‚úî Userga Xabar yuborish uchun
    /sms üÜîÔ∏è Xabar 
    shu tarzda yuboring!
    
    üë®‚ÄçüíªAdmin: $adminuser",
    'reply_markup'=>$back,
    ]);
    }else{
    bot("sendmessage",[
    'chat_id'=>$cid,
    'text'=> "*ü§™üòÇ Bu funksiyani Faqat men @$userR ishlata olaman.*",
    'parse_mode'=>'Markdown',
    ]);
    }
    }
    if(mb_stripos($text,"/sms") !== false){
    if($cid == $admin){
    $ex = explode(" ",$text);
    $sms = str_replace("/sms $ex[1]","",$text);
    $ismi = $message->from->first_name;
    
    if(mb_stripos($ex[1],"@") !== false){
    $ssl = str_replace("@","",$ex[1]);
    $egasi = "t.me/$ssl";
    }else{
    $egasi = "tg://user?id=$ex[1]";
    $eegasi = "$ex[1]";
    }
    bot('sendmessage',[
    'chat_id'=>$ex[1],
    'text'=>"üì®*Yangi Xabar*
    
    üë§ [$ismi](tg://user?id=$uid)
    
    *üì® Xabar: $sms
    
    ‚ùÑ @$bot*",
    'parse_mode'=>"markdown", 
    ]);
    bot('sendmessage',[
    'chat_id'=>$admin,
    'text'=>"üë§[Foydalanuvchi]($egasi) ga Habaringiz Yuborildiüì©",
    'parse_mode'=>"markdown", 
    'reply_markup'=>$panel
    ]);
    }else{
    bot("sendmessage",[
    'chat_id'=>$cid,
    'text'=> "*ü§™üòÇ Bu funksiyani Faqat men $adminuser ishlata olaman.*",
    'parse_mode'=>'Markdown',
    ]);
    }
    }
//
if($text=="üñá Reklama O'chirish" and $cid==$admin){
    unlink("reklama/reklama.txt");
    bot('sendmessage',[
    'chat_id'=>$admin,
    'text'=>"Reklama o'chirildi",
    'reply_markup'=>$panel
    ]);
    }
    if($text=="üñá Reklama Berish" and $cid==$admin){
    file_put_contents("step/$admin.txt","rek");
    bot('sendmessage',[
    'chat_id'=>$admin,
    'text'=>"Reklama matnini kiriting",
    'reply_markup'=>$panel,
    ]);
    }
    if($step=="rek"){
    file_put_contents("reklama/reklama.txt","$text");
    unlink("step/$admin.txt");
    bot('sendmessage',[
    'chat_id'=>$admin,
    'text'=>"Reklama Joylandi",
    'reply_markup'=>$panel,
    ]);
    }
//
$on = file_get_contents("on.txt");
if ($on == "off" && $cid = "$admin"){
bot('sendmessage',[
	'chat_id'=>$cid,
	'text'=>"‚ö†Ô∏è<b>@$botname dam olish rejimida iltimos bezovta qilmang.\n\nHozir tamirda.üìõ</b>",
        'parse_mode'=>'html',
]);
}
if($text == "‚ùå O'chirish" && $cid == $admin){
    file_put_contents("on.txt","off");
    bot('sendmessage',[
        'chat_id'=>$cid,
        'text'=>"‚ö†Ô∏è<b>Offline.</b>",
      'parse_mode'=>'html',
    ]);
    }
    //yoqish
    if($text == "‚úÖ Yoqish" && $cid == $admin){
    file_put_contents("on.txt","on");
    bot('sendmessage',[
        'chat_id'=>$cid,
        'text'=>"‚ö†Ô∏è<b>Online</b>",
      'parse_mode'=>'html',
    ]);
    }
//
$rpl = json_encode([
    'resize_keyboard'=>false,
    'force_reply'=>true,
    'selective'=>true,
  ]);
  //blockdan olish
   if($type=="private"){
  if($text == "üîì Blokdan olish" and $cid==$admin){
  bot('sendmessage', [
        'chat_id' =>$cid,
         'text' => "üö´Blockdan Olinadigan üÜîÔ∏èni Yozing!" ,
         'parse_mode'=>'markdown',  
         'reply_markup'=>$rpl,
         ]);
         }}
         if($reply == "üö´Blockdan Olinadigan üÜîÔ∏èni Yozing!"){  
  $fayl = file_get_contents("block.db");
  $fayl2 = "$text";
  $fayl3 = str_replace($fayl2," ",$fayl);
  file_put_contents("block.db","$fayl3");
  $fayl = file_get_contents("block.db");
  bot('sendmessage', [
        'chat_id' =>$cid,
         'text' => "[$text](tg://user?id=$text)  Bandan olindi" ,
         'parse_mode'=>'markdown', 
  'reply_markup'=>$panel,
        ]); 
        bot('sendmessage', [
        'chat_id' =>$sd,
         'text' => "üñê*Salom*  [$name](tg://user?id=$uid)  
  üòäSizga Xush Xabar Bor!
  Siz [üë®‚ÄçüíªAdminimiz](tg://user?id=$admin) Tomonidan Bandan Olindingiz!
  Endi Botni Ishlatishingiz mumkin ‚úÖ
  üîÉQayta /start Bosing!" ,
         'parse_mode'=>'markdown', 
         ]);
  }
  
  //Blocklash
  if($text=="üîí Bloklash"){
  if($cid==$admin){
  bot('sendMessage',[
  'chat_id'=>$cid,
  'text'=>"Ban Qilinadigan üÜîni Yuboring!",
  'reply_markup'=>$rpl,
  ]);
  }
  }
  if($reply=="Ban Qilinadigan üÜîni Yuboring!"){
  file_put_contents("block.db","$blocks\n$text");
  bot('SendMessage',[
     'chat_id'=>$admin,
          'text'=>"‚úÖ[$text](tg://user?id=$text) *Banlandi!*", 
          'parse_mode'=>'markdown', 
  'reply_markup'=>$panel,
          ]);
          bot('SendMessage',[
     'chat_id'=>$text,
          'text'=>"<b>‚ö†Ô∏èSizni bu botda bloklashdi. 
  üö´Endi botimizdan foydalana olmaysiz!
  ‚ùó Agar bu anglashilmovchilik bo'lda admin bilan bog'laning</b>", 
          'parse_mode'=>'html', 
          'reply_markup'=>json_encode([
          'inline_keyboard'=>[
     [["text"=>'üë®‚ÄçüíªAsminstrator', 'url'=>"https://t.me/$adminuser"]],
  ]
  ]),
  ]);
  }
  
  
  $blocks=file_get_contents("block.db");
  if(mb_stripos($blocks,"$uid")!==false){
  bot('sendMessage', [
  'chat_id'=>$cid,
  'parse_mode'=>"html",
  'text'=>"<b>üñêSalom <a href='tg:user?id=$cid'>$name</a> 
  Siz  Botimizdan foydalana olmaysiz, chunki Bot sizni bloklangan!
  Blokdan chiqish uchun üë®‚ÄçüíªAdmin ga yozing! Blokdan chiqmaguncha bot siz uchun ishlamaydi!üö´</b> " ,
  'reply_markup'=>json_encode([
  'inline_keyboard'=>[
  [['text'=>"Adminüë®‚Äçüíª", "url"=>"https://t.me/$adminuser"]],
  ]
  ])
  ]);return false;}
// kanal va admin
 

    //
    if($text=="‚ûï Kanal Qo'shish" and $cid==$admin){
        bot('sendMessage',[
        "chat_id"=>$cid,
        "text"=>"<b>Majburiy azolik kanallarni o'zgartirish uchun 
        /ch1-kanaluseri @ belgisini qoymasdan!
        /ch2-kanaluseri @ belgisini qoymasdan!
        /ch3-kanaluseri @ belgisini qoymasdan! 
        kanalingiz shaxsiy kanal bo'lmasin
        xamma /ch1 /ch2 /ch3 larni aloxida xabar qilib yuboring!</b>",
        "parse_mode"=>"html",
        "reply_markup"=>$panel,
        ]);
        }
//
if(mb_stripos($text, "/ch1-")!==false){
    $m1 = explode("-",$text);
   $m2 = $m1[1];
   file_put_contents("ch1.txt","$m2");
   bot('sendMessage',[
  'chat_id'=>$admin,
  'text'=>"1-kanal @$m2 ga o'zgardi.\n\nüõ†Ô∏èBotni kanalingizda admin qiling!",
   ]);
  }
  if(mb_stripos($text, "/ch2-")!==false){
    $m1 = explode("-",$text);
   $m2 = $m1[1];
   file_put_contents("ch2.txt","$m2");
   bot('sendMessage',[
  'chat_id'=>$admin,
  'text'=>"2-kanal @$m2 ga o'zgardi\n\nüõ†Ô∏èBotni kanalingizda admin qiling!",
   ]);
  }
  if(mb_stripos($text, "/ch3-")!==false){
    $m1 = explode("-",$text);
   $m2 = $m1[1];
   file_put_contents("ch3.txt","$m2");
   bot('sendMessage',[
  'chat_id'=>$admin,
  'text'=>"3-kanal @$m2 ga o'zgardi!\n\nüõ†Ô∏èBotni kanalingizda admin qiling!",
   ]);
  }
  
//
if($text=="üóë Kanal O'chirish" and $cid==$admin){
    bot('sendMessage',[
        'chat_id'=>$admin,
        'text'=>"Kanalni uzish uchun ochirilgan kanal orniga boshqa kanal qoshish kerak!
        
        Kanal uzish uchun 
        /ch1
        /ch2
        /ch3
        larni o'zgartiring!"
    ]);
}
if($text=="üìÑ Kanal Ro'yhati" and $cid==$admin){
bot('sendMessage',[
'chat_id'=>$admin, 
'text'=>"<i>Bot kanallari:\n\n $kanals \n bot kanallari soni: 3 ta.</i>", 
'parse_mode'=>'HTML', 
]);
}
//
if($text=="‚ûï Admin Qo'shish" and $cid==$admin){
    file_put_contents("step/$cid.txt","add");
    bot('sendMessage',[
    'chat_id'=>$admin, 
    'text'=>"<i>Marhamat Admin qilmochi bo`lgan id raqamni yuboring</i>", 
    'parse_mode'=>'HTML', 
    ]);
    } 
    
    if($text=="üóë Admin O'chirish" and $cid==$admin){
    file_put_contents("minus/$cid.txt","remove");
    bot('sendMessage',[
    'chat_id'=>$admin, 
    'text'=>"<i>Marhamat Admindan olmoqchi bo`lgan id raqamni yuboring</i>", 
    'parse_mode'=>'HTML', 
    ]);
    } 
     
    $son = substr_count($admins,"\n");
    if($text=="üìÑ Admin Ro'yhati" and $cid==$admin){
    bot('sendMessage',[
    'chat_id'=>$admin, 
    'text'=>"<i>Bot adminlari idlari:\n\n $admins \n bot adminlari soni: $son ta.</i>", 
    'parse_mode'=>'HTML', 
    ]);
    }
    
    if($userstep=="add"){
    unlink("step/$cid.txt");
    file_put_contents("admins.txt","\n".$text,FILE_APPEND);
    bot('sendMessage',[
    'chat_id'=>$cid, 
    'text'=>"<a href='tg://user?id=$text'>$text</a><i>botga Adminstrator qilib tayinandi.</i>", 
    'parse_mode'=>'HTML', 
    ]);
    bot('sendMessage',[
    'chat_id'=>$text, 
    'text'=>"_Tabriklaymiz siz ushbu botga adminstrator qilib tayinlandingiz_
    Sizning admin panelingiz /admin ", 
    'parse_mode'=>'markdown', 
    ]);
    } 
    
    if($step1=="remove"){
    unlink("minus/$cid.txt");
    $str = str_replace("$text","",$admins);
    file_put_contents("admins.txt","$str");
    bot('sendMessage',[
    'chat_id'=>$cid, 
    'text'=>"<a href='tg://user?id=$text'>$text</a><i> botda Adminstratorlikdan olib tashlandi</i>", 
    'parse_mode'=>'HTML', 
    ]);
    bot('sendMessage',[
    'chat_id'=>$text, 
    'text'=>"*Salom siz botmizda adminstratorlikdan olib tashlandingiz*", 
    'parse_mode'=>'markdown', 
    ]);
    } 

//statistika
if($text == "üìä Sitatistika"){
if($cid == $admin){
$lichka=file_get_contents("shekih.db");
$lich=substr_count($lichka,"\n");
$time=date('H:i:s',strtotime('3 hour'));

bot('sendmessage',[
'chat_id'=>$cid,
    'text'=> "<b>Bot statatistikasi:</b>    
‚îú‚ñ∂A'zolar: <b>$lich</b>",
'parse_mode'=>'html',
]);
}
}

//pul berish
if(mb_stripos($tx, "üí∏ Pul berish")!==false){
bot('sendmessage',[
'chat_id'=>$cid,
'text'=> "<b>‚úÖPul ayrish Uchun Quyidagi Buyruqni bajaring!
Bir qator pastga tushib id raqamni yozing, yana bir qator pastga tushib olmosni yozing!
Masalan:</b>
<code>/plus
$admin
1000</code>",
'parse_mode' => 'html',
'reply_markup'=>$back4_menu,
]);
}elseif(mb_stripos($tx, "/plus")!==false){
if($cid == $admin){
$id = explode("\n", $tx);
$id1 = $id[1]; $id2 = $id[2];
$olmos = file_get_contents("referal/$id1.txt");
$miqdor = $olmos+$id2;
file_put_contents("referal/$id1.txt","$miqdor");
bot('sendmessage',[
'chat_id'=>$cid,
'text'=> "<b>üõ† Hisobi to'ldirildi.
üÜî Id raqami : $id1
üí≥ To'ldirildi : $id2 olmos</b>",
'parse_mode' => 'html',
'reply_markup'=>$panel,
]);
bot("sendmessage",[
'chat_id'=>$id1,
'text'=> "*üõ† Hisobingiz $id2 olmos ga to'ldirildi.*",
'parse_mode'=>'Markdown',
]);
}else{
bot("sendmessage",[
'chat_id'=>$cid,
'text'=> "<b>Bu bo‚Äòlimni faqat bot administratori ishlata oladi!</b>",
'parse_mode'=>'Markdown',
]);
}
}

//pul ayirish
if($text == "üí∏ Pul ayirish"){
bot('sendmessage',[
'chat_id'=>$cid,
'text'=> "<b>‚úÖPul ayrish Uchun Quyidagi Buyruqni bajaring!
Bir qator pasga tushib id raqamni yozing, yana bur qator tushib pulni yozing!
Masalan:</b>
<code>/minus
$admin
1000</code>",
'parse_mode' => 'html',
'reply_markup'=>$back4_menu,
]);
}elseif(mb_stripos($text, "/minus")!==false){
if($cid == $admin){
$id = explode("\n", $tx);
$id1 = $id[1]; $id2 = $id[2];
$olmos = file_get_contents("referal/$id1.txt");
$miqdor = $olmos-$id2;
file_put_contents("referal/$id1.txt","$miqdor");
bot('sendmessage',[
'chat_id'=>$cid,
'text'=> "<b>üõ† Hisobdan yechib olindi.
üÜî Id raqami : $id1
üí≥ Yechildi : $id2 olmos</b>",
'parse_mode' => 'html',
'reply_markup'=>$panel,
]);
bot("sendmessage",[
'chat_id'=>$id1,
'text'=> "*üõ† Hisobingizdan $id2 olmos ayirdi.*",
'parse_mode'=>'Markdown',
]);
}else{
	bot("sendmessage",[
'chat_id'=>$cid,
'text'=> "*ü§™üòÇ Bu funksiyani Faqat men $adminuser ishlata olaman.*",
'parse_mode'=>'Markdown',
]);
}
}

//bot kodi
if($tx == "üìÇ Skript" and $cid == $admin){
bot('sendDocument',[
'chat_id'=>$admin,
'document'=>new CURLFile(__FILE__),
'caption'=>"$botname kodi",
]);
}



if($tx == "üìã Ma'lumotlar"){
	bot('SendMessage',[
	'chat_id'=>$cid,
	'text'=>"üí° <b>@$bot jamoasi:</b>
	
<i>Telegram tarmog‚Äòidagi eng yangi loyiha 
@$bot siz bu bot orqali php dasturlash tillarini bilmasdan turib ham bot yaratish imkoniyatiga egasiz!</i>

‚öô<b> Tizim versiyasi: v1.2.</b>",
'parse_mode'=>'html',
'reply_markup'=>json_encode([
'inline_keyboard'=>[
[['text'=>"üìö Qo'llanma",'callback_data'=>"noma"],['text'=>"‚ö†Ô∏è Qoidalar",'callback_data'=>"qoida"]],
]
])
]);
}

if($data == "malumot"){
	bot('editMessageText',[
	'chat_id'=>$ccid,
	'message_id'=>$cmid,
	'text'=>"üí° <b>@$bot jamoasi:</b>
	
<i>Telegram tarmog‚Äòidagi eng yangi loyiha 
@$bot siz bu bot orqali php dasturlash tillarini bilmasdan turib ham bot yaratish imkoniyatiga egasiz!</i>

‚öô<b>Tizim versiyasi: v0.8.0</b>",
'parse_mode'=>'html',
'reply_markup'=>json_encode([
'inline_keyboard'=>[
[['text'=>"üìö Qo'llanma",'callback_data'=>"noma"],['text'=>"‚ö†Ô∏è Qoidalar",'callback_data'=>"qoida"]],
]
])
]);
}


if($data=="noma"){
bot('editMessageText',[
'chat_id'=>$ccid,
'message_id'=>$cmid,
'text'=>"ü§ñ <b>Bot yaratish qo'llanmasi!

1. Telegram dasturingizdan @BotFather deb qidiring va START tugmasini bosing!

2. @BotFather ga /newbot buyrug'ini yozing.

3. Yaratmoqchi bo'lgan botingiz NOMINI yozing.

4. Botingiz BOTNAMEsini yozing (botname oxiri  bot  yoki robot bilan tugashi kerak).

5. Agar amallarni to'g'ri bajargan bo'lsangiz sizga @BotFather botingiz Tokenini yuboradi uni saqlab qo'ying!

6. Bot yaratayotganingizda botimiz Token so'raganida @BotFather yuborgan tokeni yuborasiz.

‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ

‚ùóESLATMA: </b>

‚ö†Ô∏è<i>Qoidalarga rioya qilmagan foydalanuvchi botdan blocklarnishi mumkin.

üõ† Dasturchi: <a href='tg://user?id=$admin'>Quvondiqov Doston</a></i>",
'parse_mode'=>"html",
'reply_markup'=>json_encode([
'inline_keyboard'=>[
[['text'=>"‚óÄÔ∏èOrtga",'callback_data'=>"malumot"]],
]
])
]);
}

if($data == "qoida"){
	bot('EditMessageText',[
	'chat_id'=>$ccid,
	'message_id'=>$cmid,
	'text'=>"<b>‚ö†Ô∏è Qoidalar:</b>\n\n<i>1. Ushbu robot maker bot adminstratorlari va bot  dasturchisi foydalanuvchilardan quydagilarni o'z zimmasiga olmasligi haqida sizga eslatib o'tadi:\n1.1 ushbu botdan foydalangan holda ochilgan barcha botlar sizga pul to'lashi yoki to'lamasligj bu bizga bog'liq emas va biz sizga pul to'lamaymiz!\n1.2 agar sizga ushbu botlar server orqali pul to'laydi deyishsa ishonmang yoki o'zingizda shunday xayol bo'lsa buni uniting chunki bu aqilsiz gap!\nüõ† Dasturchi: <a href='tg://user?id=$admin'>Quvondiqov Doston</a></i>",
	'parse_mode'=>'html',
	'reply_markup'=>json_encode([
	'inline_keyboard'=>[
	[['text'=>"‚óÄÔ∏èOrtga",'callback_data'=>"malumot"]],
]
])
]);
}

//FREEBOTS
if($tx == "üòäSmile Games" and joinchat($fid)=="true"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"1Ô∏è‚É£ @BotFather-ga o'ting.  Buning uchun uning ismini bosing.
2Ô∏è‚É£ U bilan yangi bot yarating.  Buning uchun @BotFather ichidagi /newbot buyrug'idan foydalaning.
3Ô∏è‚É£ @BotFather sizga beradigan API tokenidan nusxa oling.
4Ô∏è‚É£ @VipBuilder_UzBot -ga qaytib, nusxalangan API tokenini shu botga yuboring.
üí•Taxminiy API Token:
 126521644:AAGlXut7dgde4jr94X8PNM1WXHhPwlLA",
    'reply_markup'=>$kar_menu
    ]);
    file_put_contents("step/$fid.txt","smile&token");
}

if($userstep == "smile&token" and $tx !== "‚¨ÖÔ∏è Bekor qilish" and joinchat($fid)=="true"){
    if(mb_stripos($tx, ":")!==false){
        $getid = bot('sendMessage',[
        'chat_id'=>$cid,
        'text'=>"‚öîÔ∏èTayyorlanmoqda..."
        ])->result->message_id;
    $kod = file_get_contents("bepul/smile.php");
    $kod = str_replace("API_TOKEN", "$tx", $kod);
    $kod = str_replace("ADMIN_ID", "$fid", $kod);
$kod = str_replace("ADMIN_USER", "$user", $kod);
    
    mkdir("user/$fid/smile");
    if(file_get_contents("user/$fid/smile/smile.php")){
        unlink("user/$fid/smile/smile.php");
    }
    file_put_contents("user/$fid/smile/smile.php", $kod);

    $get = json_decode(file_get_contents("https://api.telegram.org/bot$tx/setwebhook?url=https://".$_SERVER['SERVER_NAME']."/Maxsus/user/$fid/smile/smile.php"))->result;

    if($get){
        $user = json_decode(file_get_contents("https://api.telegram.org/bot$tx/getme"))->result->username;
        $nomi = json_decode(file_get_contents("https://api.telegram.org/bot$tx/getme"))->result->first_name;
        $id = json_decode(file_get_contents("https://api.telegram.org/bot$tx/getme"))->result->id;
        bot('deleteMessage',['chat_id'=>$cid,'message_id'=>$getid]);
        bot('sendMessage',[
        'chat_id'=>$cid,
        'message_id'=>$getid,
        'text'=>"‚úÖ Bot tayyor!\n\nüí° Bot turi: smile games bot\nüë§ Bot nomi: $nomi\n‚ú≥Ô∏è Useri: @$user\nüÜî raqami: $id",
        'parse_mode'=>"html",
        'reply_markup'=>$kar_menu
        ]);
        $getssss = file_get_contents("stat/stat.txt");
        $getssss += 1;
        file_put_contents("stat/stat.txt", $getssss);
    } else {        
        bot('deleteMessage',['chat_id'=>$cid,'message_id'=>$getid]);        
        bot('sendMessage',[
        'chat_id'=>$cid,
        'text'=>"üìõ Noma'lum xatolik",
        'parse_mode'=>"html",
        'reply_markup'=>$kar_menu
        ]);
    }

    unlink("step/$fid.txt");
   }else{
        bot('sendMessage',[
        'chat_id'=>$cid,
        'text'=>"üìõ Menimcha siz tokenni yuborishda xatolikk yo'l qo'ydingiz!\nToken to'g'riligiga ishonch hosil qilib, qayta yuboring!",
        'parse_mode'=>"html"
        ]);
   }
}


?>